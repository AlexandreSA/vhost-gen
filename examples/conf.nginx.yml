---
# Generic vhost generator configuration file
# Location: /etc/vhost-gen/conf.yml
#
# If not specified or file is missing the following
# default values will be merged to your current (if any)
# configuration:
#
# server: nginx
# conf_dir: /etc/nginx/conf.d
# vhost:
#   name:
#     prefix:
#     suffix:
#   docroot:
#     suffix:
#   log:
#     prefix:
#     dir:
#       create: True
#       path: /var/log/nginx
#     mode:
#       set: True
#       mode: '0755'
#     user:
#       set: False
#       user: 'nginx'
#     group:
#       set: False
#       user: 'nginx'
#   listen:
#     enable: False
#   php_fpm:
#     enable: False
#     address:
#     port: 9000
#   alias:
#     - alias: /url/
#       path: /path/htdocs
#       xdomain_request:
#         enable: yes
#         origin: 'http(s)?://(.*)$'
#   deny:
#     - alias: '/\.git'
#     - alias: '/\.ht.*'
#   server_status:
#     enable: False
#     alias: /status-page


# The server type determines which template
# from etc/templates/ will be chosen.
# Allowed server types:
# server: apache22
# server: apache24
# server: nginx
server: nginx

# Where to store the generated configuration files.
# This must be a directory the web server will read
# configuration files from.
conf_dir: /etc/nginx/conf.d

# Vhost definition
vhost:
  # The virtual host name is specified as an command line argument
  # to vhost_gen.py via '-n', however it is possible
  # to prepend and/or append additional name strings.
  name:
    prefix:
    suffix: .loc
  # The document root directory is specified as an command line argument
  # to vhost_gen.py via '-p', however it is possible
  # to prepend another subdirectory here.
  docroot:
    suffix: htdocs
  # Log definition
  log:
    # Access and error log file prefix.
    # By default the vhost name is used for log file names.
    # You can also prepand an additional string to the logfiles
    # as shown here:
    # <prefix><vhost>-error.log
    # <prefix><vhost>-access.log
    prefix: ''
    # Directory to store log files in.
    # Also define if the directory should be created or not.
    dir:
      create: yes
      path: /var/log/nginx
    mode:
      set: no
      mode: '0750'
    user:
      set: no
      user: 'nginx'
    group:
      set: no
      group: 'nginx'
  # Enable listen directive (nginx only)
  # When using nginx and you already have a default virtualhost
  # you should disable the listen directive (enable: no) for creating
  # additional mass virtual hosts.
  listen:
    enable: yes
  # Enable PHP-FPM
  php_fpm:
    enable: yes
    address: php
    port: 9000
  # Create additional aliases
  alias:
    - alias: /my-api
      path: /var/www/default/api/
      # Allow cross-domain-request
      xdomain_request:
        enable: yes
        origin: 'http(s)?://(.*)$'
  # Denies
  deny:
    - alias: '/\.git'
    - alias: '/\.ht.*'
  server_status:
    enable: yes
    alias: '/status-page'
