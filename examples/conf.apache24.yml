---
# Generic vhost generator configuration file
# Location: /etc/vhost-gen/conf.yml
#
# If not specified or file is missing the following
# default values will be merged to your current (if any)
# configuration:
#
# server: nginx
# conf_dir: /etc/nginx/conf.d
# vhost:
#   name:
#     prefix:
#     suffix:
#   docroot:
#     suffix:
#   log:
#     access:
#       stdout: no
#       prefix:
#     error:
#       stderr: no
#       prefix:
#     dir:
#       create: no
#       path: /var/log/nginx
#       mode:
#         set: no
#         mode: '0755'
#       user:
#         set: no
#         user: nginx
#       group:
#         set: no
#         user: nginx
#   listen:
#     enable: no
#   php_fpm:
#     enable: no
#     address: php
#     port: 9000
#   alias: []
#   deny: []
#   server_status:
#     enable: no
#     alias: /server-status


# The server type determines which template
# from etc/templates/ will be chosen.
# Allowed server types:
# server: apache22
# server: apache24
# server: nginx
server: apache24

# Where to store the generated configuration files.
# This must be a directory the web server will read
# configuration files from.
conf_dir: /etc/apache2/conf.d

# Vhost definition
vhost:
  # The virtual host name is specified as an command line argument
  # to vhost_gen.py via '-n', however it is possible
  # to prepend and/or append additional name strings.
  name:
    prefix:
    suffix: .loc
  # The document root directory is specified as an command line argument
  # to vhost_gen.py via '-p', however it is possible
  # to prepend another subdirectory here.
  docroot:
    suffix: htdocs
  # Log definition
  log:
    # Log file settings (error/access log)
    access:
      # For use inside a docker container, enable this in order
      # to redirect the access log to stdout instead of to file.
      stdout: no
      # By default the vhost name is used for log file names.
      # You can also prepand an additional string to the access log
      # as shown here:
      # <prefix><vhost>-access.log
      prefix: ''
    error:
      # For use inside a docker container, enable this in order
      # to redirect the error log to stderr instead of to file.
      stderr: no
      # By default the vhost name is used for log file names.
      # You can also prepand an additional string to the error log
      # as shown here:
      # <prefix><vhost>-error.log
      prefix: ''
    # Directory to store log files in.
    # Also define if the directory should be created or not.
    dir:
      create: yes
      path: /var/log/apache2
      mode:
        set: no
        mode: '0750'
      user:
        set: no
        user: apache
      group:
        set: no
        group: apache
  # Enable listen directive (nginx only)
  # When using nginx and you already have a default virtualhost
  # you should disable the listen directive (enable: no) for creating
  # additional mass virtual hosts.
  listen:
    enable: no
  # Enable PHP-FPM
  php_fpm:
    enable: yes
    # Hostname or IP address
    address: php
    port: 9000
  # Create additional aliases
  alias:
    - alias: /my-api
      path: /var/www/default/api/
      # Allow cross-domain-request to this alias from the hosts/origin
      # specified by the below defined regex
      xdomain_request:
        enable: yes
        origin: 'http(s)?://(.*)$'
  # Denies locations
  deny:
    - alias: '/\.git'
    - alias: '/\.ht.*'
  # Enable server status on the following alias
  server_status:
    enable: yes
    alias: /status-status
